# vertx-service-proxy-codegen-issue
This repository is to produce the vertx code gen issue with vert.x 4.x

**Compilation Error**

warning: Unclosed files for the types '[PathForCodeGenProcessor]'; these types will not undergo annotation processing
vertx-service-proxy-codegen-issue\build\generated\sources\annotationProcessor\java\main\service\proxy\issue\subpackage\SubInterfaceVertxEBProxy.java:
80: error: cannot find symbol
        testInterfaceHandler.handle(Future.succeededFuture(new TestInterfaceVertxEBProxy(_vertx, res.result().headers().get("proxyaddr"))));
                                                               ^
  symbol:   class TestInterfaceVertxEBProxy
  location: class SubInterfaceVertxEBProxy
1 error

**Code generated by 4.x**
```
 @Override
  public SubInterface interfaceWithDependentProxy(JsonObject input, Handler<AsyncResult<TestInterface>> testInterfaceHandler){
    if (closed) {
      testInterfaceHandler.handle(Future.failedFuture(new IllegalStateException("Proxy is closed")));
      return this;
    }
    JsonObject _json = new JsonObject();
    _json.put("input", input);
    DeliveryOptions _deliveryOptions = (_options != null) ? new DeliveryOptions(_options) : new DeliveryOptions();
    _deliveryOptions.addHeader("action", "interfaceWithDependentProxy");
    _vertx.eventBus().<TestInterface>request(_address, _json, _deliveryOptions, res -> {
      if (res.failed()) {
        testInterfaceHandler.handle(Future.failedFuture(res.cause()));
      } else {
        testInterfaceHandler.handle(Future.succeededFuture(new TestInterfaceVertxEBProxy(_vertx, res.result().headers().get("proxyaddr"))));
      }
    });
    return this;
  }
  ```
  
**Code generated by  3.9.5 **
```
	@Override
  public SubInterface interfaceWithDependentProxy(JsonObject input, Handler<AsyncResult<TestInterface>> testInterfaceHandler){
    if (closed) {
      testInterfaceHandler.handle(Future.failedFuture(new IllegalStateException("Proxy is closed")));
      return this;
    }
    JsonObject _json = new JsonObject();
    _json.put("input", input);
	DeliveryOptions _deliveryOptions = (_options != null) ? new DeliveryOptions(_options) : new DeliveryOptions();
    _deliveryOptions.addHeader("action", "interfaceWithDependentProxy");
    _vertx.eventBus().<TestInterface>request(_address, _json, _deliveryOptions, res -> {
      if (res.failed()) {
        handler.handle(Future.failedFuture(res.cause()));
      } else {
        String addr = res.result().headers().get("proxyaddr");
        handler.handle(Future.succeededFuture(new ServiceProxyBuilder(_vertx).setAddress(addr).build(TestInterface.class)));
      }
    });
	return this;
  }	
```
**please run : gradle clean build**
